name: Test Available Versions

on:
  workflow_dispatch:
  push:
    branches:
      - test-versions

permissions:
  contents: read

jobs:
  test-swift-versions:
    name: Test Swift Versions
    runs-on: macos-14
    strategy:
      matrix:
        swift-version: ["5.10", "6.0", "6.1.0", "6.2"]
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Test Swift ${{ matrix.swift-version }}
        id: test-swift
        continue-on-error: true
        uses: swift-actions/setup-swift@v1
        with:
          swift-version: ${{ matrix.swift-version }}
      
      - name: Report Result
        if: always()
        run: |
          if [ "${{ steps.test-swift.outcome }}" == "success" ]; then
            echo "✅ Swift ${{ matrix.swift-version }} is AVAILABLE"
          else
            echo "❌ Swift ${{ matrix.swift-version }} is NOT AVAILABLE"
          fi

  test-macos-versions:
    name: Test macOS Runners
    strategy:
      matrix:
        macos-version: ["macos-13", "macos-14", "macos-15"]
    runs-on: ${{ matrix.macos-version }}
    continue-on-error: true
    steps:
      - name: Check macOS Version
        run: |
          sw_vers
          echo "✅ macOS runner ${{ matrix.macos-version }} is AVAILABLE"
        continue-on-error: true
      
      - name: Report Result
        if: always()
        run: |
          if [ "${{ job.status }}" == "success" ]; then
            echo "✅ macOS ${{ matrix.macos-version }} is AVAILABLE"
          else
            echo "❌ macOS ${{ matrix.macos-version }} is NOT AVAILABLE"
          fi
